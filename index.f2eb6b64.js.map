{"mappings":"AAMA,MAAMA,aAAeC,SAASC,eAAe,OAGvCC,IAAM,CAACC,EAASC,KACpB,MAAMC,EAAQL,SAASM,cAAc,MACrCD,EAAME,UAAYJ,EAClBE,EAAMG,UAAUC,IAAIL,GACpBL,aAAaW,YAAYL,GACzBM,QAAQT,IAAIC,GACZJ,aAAaa,UAAYb,aAAac,cAGxCX,IAAI,gBAGJ,MAAMY,aAAgBC,IACpBb,IAAI,oDAKAc,YAAeC,IACnB,MAAMC,EAAkBlB,SAASC,eAAe,eAC5CgB,GACFC,EAAgBV,UAAUC,IAAI,WAC9BS,EAAgBX,UACd,oDAEFW,EAAgBV,UAAUW,OAAO,WACjCD,EAAgBX,UACd,yDAKAa,aAAe,KACnBJ,aAAY,IAIRK,YAAc,KAClBL,aAAY,IAGdM,OAAOC,iBAAiB,QAAST,cACjCQ,OAAOC,iBAAiB,QAASH,cACjCE,OAAOC,iBAAiB,OAAQF,aAEhCL,aAAY,GAsBZ,MAAMQ,mBAAqB,KAEzBF,OAAOG,YAAW,WACZzB,SAAS0B,yBAAyBC,mBAIF,qBAA9B3B,SAAS0B,cAAcE,IAIzB1B,IAAI,oDAAqD,aAG5D,IAGLoB,OAAOC,iBAAiB,OAAQC","sources":["src/script.js"],"sourcesContent":["/**\n * INTERNAL CODE FOR CODESANDBOX EXAMPLE\n *\n * You can ignore this. All of this only serves the example.\n */\n\nconst logContainer = document.getElementById(\"log\");\n\n// Logging tool for easy presentation\nconst log = (message, classname) => {\n  const entry = document.createElement(\"li\");\n  entry.innerHTML = message;\n  entry.classList.add(classname);\n  logContainer.appendChild(entry);\n  console.log(message);\n  logContainer.scrollTop = logContainer.scrollHeight;\n};\n\nlog(\"Hello world!\");\n\n// Logs clicks on the document itself, to differentiate against clicks NOT on the document.\nconst clickHandler = (e) => {\n  log(\"I clicked somewhere in the containing document.\");\n};\n\n// Display the current status of the document focus. This is important to understand for explaining\n// the workaround \"click handler\".\nconst focusStatus = (focused) => {\n  const statusContainer = document.getElementById(\"focusStatus\");\n  if (focused) {\n    statusContainer.classList.add(\"focused\");\n    statusContainer.innerHTML =\n      \"Window is FOCUSED; iframe click can be detected\";\n  } else {\n    statusContainer.classList.remove(\"focused\");\n    statusContainer.innerHTML =\n      \"Window is UNFOCUSED; iframe click cannot be detected\";\n  }\n};\n\n// Handles the document's focus event. Simply displays info.\nconst focusHandler = () => {\n  focusStatus(true);\n};\n\n// Handles the document's blur event. Simply displays info.\nconst blurHandler = () => {\n  focusStatus(false);\n};\n\nwindow.addEventListener(\"click\", clickHandler);\nwindow.addEventListener(\"focus\", focusHandler);\nwindow.addEventListener(\"blur\", blurHandler);\n\nfocusStatus(false);\n\n/**\n * RELEVANT CODE FOR MILLIONKLICK IMPLEMENTATION\n *\n * This is what matters.\n */\n\n/**\n * Handles the window's \"blur\" event to check whether focus was lost specifically\n * on the ad iframe we are targeting.\n *\n * This creates a fake \"click handler\" which handles cross-origin iframes. However, it\n * comes with the caveat of only working if the window is currently *focused*.\n *\n * This means that at least one click needs to happen in the window before the event will register.\n * This resets every time the window loses focus.\n *\n * Therefore it is not a perfect solution, but it's what we got.\n *\n * Due to iframe nesting, this has to be implemented on the topmost layer (i.e. the GMX site).\n */\nconst iframeClickHandler = () => {\n  // setTimeout for Firefox support.\n  window.setTimeout(function () {\n    if (document.activeElement instanceof HTMLIFrameElement) {\n      // A click happened inside an iframe.\n\n      // Check of your choice to determine if the iframe is the correct one.\n      if (document.activeElement.id === \"myTargetedIframe\") {\n        // A click happened in the exact iframe we're targeting.\n\n        // Mission complete! Perform your desired code here.\n        log(\"Success! I clicked inside the targeted ad iframe.\", \"success\");\n      }\n    }\n  }, 0);\n};\n\nwindow.addEventListener(\"blur\", iframeClickHandler);\n"],"names":["logContainer","document","getElementById","log","message","classname","entry","createElement","innerHTML","classList","add","appendChild","console","scrollTop","scrollHeight","clickHandler","e","focusStatus","focused","statusContainer","remove","focusHandler","blurHandler","window","addEventListener","iframeClickHandler","setTimeout","activeElement","HTMLIFrameElement","id"],"version":3,"file":"index.f2eb6b64.js.map"}